<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="myshop.Views.ProductsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Page.Resources>
        <!--  Custom Styles  -->
        <SolidColorBrush x:Key="PrimaryAccentBrush" Color="#0078D4" />
        <SolidColorBrush x:Key="SecondaryAccentBrush" Color="#106EBE" />
        <SolidColorBrush x:Key="SuccessBrush" Color="#107C10" />
        <SolidColorBrush x:Key="DangerBrush" Color="#D13438" />

        <Style x:Key="FilterCardStyle" TargetType="Border">
            <Setter Property="Background" Value="{ThemeResource LayerFillColorDefaultBrush}" />
            <Setter Property="BorderBrush" Value="{ThemeResource CardStrokeColorDefaultBrush}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="8" />
            <Setter Property="Padding" Value="20" />
        </Style>

        <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Foreground" Value="{ThemeResource TextFillColorSecondaryBrush}" />
            <Setter Property="Margin" Value="0,0,0,8" />
        </Style>
    </Page.Resources>

    <Grid Padding="32,24,32,24" Background="{ThemeResource LayerOnMicaBaseAltFillColorDefaultBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!--  Header with Icon  -->
        <Grid Grid.Row="0" Margin="0,0,0,28">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <Border
                Grid.Column="0"
                Width="48"
                Height="48"
                Margin="0,0,16,0"
                Background="{StaticResource PrimaryAccentBrush}"
                CornerRadius="12">
                <FontIcon
                    FontSize="24"
                    Foreground="White"
                    Glyph="&#xE7BF;" />
            </Border>

            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                <TextBlock
                    FontSize="28"
                    FontWeight="SemiBold"
                    Text="Quản lý Sản phẩm" />
                <TextBlock
                    Margin="0,4,0,0"
                    FontSize="13"
                    Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                    Text="Thêm, sửa, xóa và quản lý sản phẩm của cửa hàng" />
            </StackPanel>
        </Grid>

        <!--  Filter Panel  -->
        <Border
            Grid.Row="1"
            Margin="0,0,0,20"
            Style="{StaticResource FilterCardStyle}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!--  Row 1: Search, Category, Sort  -->
                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2.5*" />
                        <ColumnDefinition Width="16" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="16" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <!--  Search Box  -->
                    <StackPanel Grid.Column="0">
                        <TextBlock Style="{StaticResource SectionHeaderStyle}" Text="TÌM KIẾM" />
                        <TextBox
                            x:Name="SearchBox"
                            Height="40"
                            PlaceholderText="Nhập tên sản phẩm hoặc mã SKU...">
                            <TextBox.Resources>
                                <SolidColorBrush x:Key="TextControlBorderBrushFocused" Color="#0078D4" />
                            </TextBox.Resources>
                        </TextBox>
                    </StackPanel>

                    <!--  Category Filter  -->
                    <StackPanel Grid.Column="2">
                        <TextBlock Style="{StaticResource SectionHeaderStyle}" Text="DANH MỤC" />
                        <ComboBox
                            x:Name="CategoryComboBox"
                            Height="40"
                            HorizontalAlignment="Stretch"
                            PlaceholderText="Tất cả">
                            <ComboBoxItem Content="Tất cả danh mục" />
                            <ComboBoxItem Content="Điện tử" />
                            <ComboBoxItem Content="Thời trang" />
                            <ComboBoxItem Content="Gia dụng" />
                            <ComboBoxItem Content="Thực phẩm" />
                        </ComboBox>
                    </StackPanel>

                    <!--  Sort Options  -->
                    <StackPanel Grid.Column="4">
                        <TextBlock Style="{StaticResource SectionHeaderStyle}" Text="SẮP XẾP" />
                        <ComboBox
                            x:Name="SortComboBox"
                            Height="40"
                            HorizontalAlignment="Stretch"
                            SelectedIndex="0">
                            <ComboBoxItem>
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <FontIcon FontSize="14" Glyph="&#xE8CB;" />
                                    <TextBlock Text="Tên (A-Z)" />
                                </StackPanel>
                            </ComboBoxItem>
                            <ComboBoxItem>
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <FontIcon FontSize="14" Glyph="&#xE8EC;" />
                                    <TextBlock Text="Giá nhập" />
                                </StackPanel>
                            </ComboBoxItem>
                            <ComboBoxItem>
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <FontIcon FontSize="14" Glyph="&#xE7B8;" />
                                    <TextBlock Text="Tồn kho" />
                                </StackPanel>
                            </ComboBoxItem>
                        </ComboBox>
                    </StackPanel>
                </Grid>

                <!--  Row 2: Price Range & Filter Button  -->
                <Grid Grid.Row="1" Margin="0,20,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="180" />
                        <ColumnDefinition Width="16" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="180" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <!--  Min Price  -->
                    <TextBlock
                        Grid.Column="0"
                        Margin="0,0,12,0"
                        VerticalAlignment="Center"
                        FontWeight="SemiBold"
                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                        Text="Giá từ" />
                    <NumberBox
                        x:Name="MinPriceBox"
                        Grid.Column="1"
                        Height="40"
                        Minimum="0"
                        PlaceholderText="0 đ"
                        SpinButtonPlacementMode="Compact" />

                    <!--  Max Price  -->
                    <TextBlock
                        Grid.Column="3"
                        Margin="0,0,12,0"
                        VerticalAlignment="Center"
                        FontWeight="SemiBold"
                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                        Text="đến" />
                    <NumberBox
                        x:Name="MaxPriceBox"
                        Grid.Column="4"
                        Height="40"
                        Minimum="0"
                        PlaceholderText="∞"
                        SpinButtonPlacementMode="Compact" />

                    <!--  Filter & Clear Buttons  -->
                    <StackPanel
                        Grid.Column="6"
                        Orientation="Horizontal"
                        Spacing="12">
                        <Button
                            Height="40"
                            MinWidth="120"
                            Background="{StaticResource PrimaryAccentBrush}"
                            CornerRadius="6"
                            Style="{StaticResource AccentButtonStyle}">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon FontSize="16" Glyph="&#xE71C;" />
                                <TextBlock Text="Áp dụng" />
                            </StackPanel>
                        </Button>
                        <Button Height="40" CornerRadius="6">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon FontSize="16" Glyph="&#xE894;" />
                                <TextBlock Text="Xóa lọc" />
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </Grid>
            </Grid>
        </Border>

        <!--  DataGrid Section  -->
        <Grid Grid.Row="2">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!--  Action Buttons  -->
            <Grid Grid.Row="0" Margin="0,0,0,16">
                <StackPanel
                    HorizontalAlignment="Left"
                    Orientation="Horizontal"
                    Spacing="12">
                    <Button
                        x:Name="AddButton"
                        Height="40"
                        MinWidth="140"
                        Background="{StaticResource SuccessBrush}"
                        CornerRadius="6"
                        Style="{StaticResource AccentButtonStyle}">
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <FontIcon FontSize="18" Glyph="&#xE710;" />
                            <TextBlock FontWeight="SemiBold" Text="Thêm mới" />
                        </StackPanel>
                        <Button.KeyboardAccelerators>
                            <KeyboardAccelerator Key="N" Modifiers="Control" />
                        </Button.KeyboardAccelerators>
                    </Button>
                    <Button
                        x:Name="EditButton"
                        Height="40"
                        MinWidth="110"
                        CornerRadius="6">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon FontSize="16" Glyph="&#xE70F;" />
                            <TextBlock Text="Sửa" />
                        </StackPanel>
                        <Button.KeyboardAccelerators>
                            <KeyboardAccelerator Key="E" Modifiers="Control" />
                        </Button.KeyboardAccelerators>
                    </Button>
                    <Button
                        x:Name="DeleteButton"
                        Height="40"
                        MinWidth="110"
                        CornerRadius="6">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon
                                FontSize="16"
                                Foreground="{StaticResource DangerBrush}"
                                Glyph="&#xE74D;" />
                            <TextBlock Foreground="{StaticResource DangerBrush}" Text="Xóa" />
                        </StackPanel>
                        <Button.KeyboardAccelerators>
                            <KeyboardAccelerator Key="Delete" />
                        </Button.KeyboardAccelerators>
                    </Button>
                </StackPanel>

                <TextBlock
                    x:Name="TotalProductsText"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    FontSize="13"
                    Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
            </Grid>

            <!--  Products DataGrid  -->
            <Border
                Grid.Row="1"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="1"
                CornerRadius="8">
                <controls:DataGrid
                    x:Name="ProductsDataGrid"
                    AlternatingRowBackground="{ThemeResource SubtleFillColorSecondaryBrush}"
                    AutoGenerateColumns="False"
                    CanUserReorderColumns="True"
                    CanUserResizeColumns="True"
                    GridLinesVisibility="Horizontal"
                    HeadersVisibility="Column"
                    RowHeight="56"
                    SelectionMode="Single">
                    <controls:DataGrid.Columns>
                        <controls:DataGridTextColumn
                            Width="130"
                            Binding="{Binding Sku}"
                            FontWeight="SemiBold"
                            Header="MÃ SKU" />
                        <controls:DataGridTextColumn
                            Width="2.5*"
                            Binding="{Binding Name}"
                            FontSize="14"
                            Header="TÊN SẢN PHẨM" />
                        <controls:DataGridTextColumn
                            Width="*"
                            Binding="{Binding Category.Name}"
                            Header="DANH MỤC" />
                        <controls:DataGridTextColumn
                            Width="140"
                            Binding="{Binding ImportPrice}"
                            Header="GIÁ NHẬP (đ)" />
                        <controls:DataGridTextColumn
                            Width="120"
                            Binding="{Binding Count}"
                            Header="TỒN KHO" />
                        <controls:DataGridTextColumn
                            Width="2*"
                            Binding="{Binding Description}"
                            FontSize="13"
                            Header="MÔ TẢ" />
                    </controls:DataGrid.Columns>
                </controls:DataGrid>
            </Border>
        </Grid>

        <!--  Pagination  -->
        <Border
            Grid.Row="3"
            Margin="0,20,0,0"
            Padding="16,12"
            Background="{ThemeResource LayerFillColorDefaultBrush}"
            BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
            BorderThickness="1"
            CornerRadius="8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!--  Page Info  -->
                <StackPanel
                    Grid.Column="0"
                    VerticalAlignment="Center"
                    Orientation="Horizontal"
                    Spacing="6">
                    <FontIcon
                        FontSize="16"
                        Foreground="{StaticResource PrimaryAccentBrush}"
                        Glyph="&#xE8A0;" />
                    <TextBlock
                        x:Name="PageInfoText"
                        FontWeight="SemiBold"
                        Text="Trang 1 / 10" />
                </StackPanel>

                <!--  Pagination Controls  -->
                <StackPanel
                    Grid.Column="1"
                    HorizontalAlignment="Center"
                    Orientation="Horizontal"
                    Spacing="8">
                    <Button
                        x:Name="FirstPageButton"
                        Width="40"
                        Height="40"
                        CornerRadius="6"
                        ToolTipService.ToolTip="Trang đầu">
                        <FontIcon FontSize="14" Glyph="&#xE892;" />
                    </Button>
                    <Button
                        x:Name="PreviousPageButton"
                        Width="40"
                        Height="40"
                        CornerRadius="6"
                        ToolTipService.ToolTip="Trang trước">
                        <FontIcon FontSize="14" Glyph="&#xE76B;" />
                    </Button>
                    <NumberBox
                        x:Name="PageNumberBox"
                        Width="90"
                        Height="40"
                        Minimum="1"
                        SpinButtonPlacementMode="Compact"
                        Value="1" />
                    <Button
                        x:Name="NextPageButton"
                        Width="40"
                        Height="40"
                        CornerRadius="6"
                        ToolTipService.ToolTip="Trang sau">
                        <FontIcon FontSize="14" Glyph="&#xE76C;" />
                    </Button>
                    <Button
                        x:Name="LastPageButton"
                        Width="40"
                        Height="40"
                        CornerRadius="6"
                        ToolTipService.ToolTip="Trang cuối">
                        <FontIcon FontSize="14" Glyph="&#xE893;" />
                    </Button>
                </StackPanel>

                <!--  Page Size  -->
                <StackPanel
                    Grid.Column="2"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    Orientation="Horizontal"
                    Spacing="10">
                    <TextBlock
                        VerticalAlignment="Center"
                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                        Text="Hiển thị" />
                    <ComboBox
                        x:Name="PageSizeComboBox"
                        Width="90"
                        Height="36"
                        SelectedIndex="0">
                        <ComboBoxItem Content="10" />
                        <ComboBoxItem Content="20" />
                        <ComboBoxItem Content="50" />
                        <ComboBoxItem Content="100" />
                    </ComboBox>
                    <TextBlock
                        VerticalAlignment="Center"
                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                        Text="/ trang" />
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Page>

